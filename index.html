<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Autodiagnóstico Outliers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <h1>Autodiagnóstico Estratégico</h1>
  <form id="diagnosticoForm">
    <label>1. ¿Cuál es el propósito principal de tu empresa?</label><br>
    <input type="text" name="pregunta1" required><br><br>

    <label>2. ¿Quién es tu cliente más importante hoy?</label><br>
    <input type="text" name="pregunta2" required><br><br>

    <label>3. ¿Cuál es tu producto o servicio más rentable?</label><br>
    <input type="text" name="pregunta3" required><br><br>

    <label>4. ¿Qué desafíos estás enfrentando actualmente? (selecciona todos los que apliquen)</label><br>
    <input type="checkbox" name="pregunta4" value="Competencia"> Competencia<br>
    <input type="checkbox" name="pregunta4" value="Estructura de costos"> Estructura de costos<br>
    <input type="checkbox" name="pregunta4" value="Equipo de trabajo"> Equipo de trabajo<br>
    <input type="checkbox" name="pregunta4" value="Innovación"> Innovación<br><br>

    <label>5. ¿Tienes claridad sobre tus ventajas competitivas?</label><br>
    <select name="pregunta5" required>
      <option value="">Selecciona una opción</option>
      <option value="Sí, muy claro">Sí, muy claro</option>
      <option value="Más o menos">Más o menos</option>
      <option value="No, nada claro">No, nada claro</option>
    </select><br><br>

    <label>6. ¿Qué tan alineado está tu equipo con la estrategia?</label><br>
    <select name="pregunta6" required>
      <option value="">Selecciona una opción</option>
      <option value="Muy alineado">Muy alineado</option>
      <option value="Parcialmente alineado">Parcialmente alineado</option>
      <option value="Desalineado">Desalineado</option>
    </select><br><br>

    <label>7. ¿Cómo tomas decisiones estratégicas en tu empresa?</label><br>
    <input type="text" name="pregunta7" required><br><br>

    <label>8. ¿Te gustaría agendar una sesión de 30 minutos para revisar juntos los resultados?</label><br>
    <select name="pregunta8" required>
      <option value="">Selecciona una opción</option>
      <option value="Sí, agendemos">Sí, agendemos</option>
      <option value="No por ahora">No por ahora</option>
    </select><br><br>

    <button type="submit">Enviar diagnóstico</button>
  </form>

  <script>
    document.getElementById("diagnosticoForm").addEventListener("submit", async function (e) {
      e.preventDefault();

      const formData = new FormData(this);
      const data = {
        pregunta1: formData.get("pregunta1"),
        pregunta2: formData.get("pregunta2"),
        pregunta3: formData.get("pregunta3"),
        pregunta4: formData.getAll("pregunta4"),
        pregunta5: formData.get("pregunta5"),
        pregunta6: formData.get("pregunta6"),
        pregunta7: formData.get("pregunta7"),
        pregunta8: formData.get("pregunta8")
      };

      if (data.pregunta8 === "Sí, agendemos") {
        window.open("https://calendly.com/TU_ENLACE", "_blank");
      }

      try {
        const response = await fetch("https://outliersestrategia.app.n8n.cloud/webhook/autodiagnostico", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        if (response.ok) {
          alert("Gracias por enviar tu diagnóstico. Pronto te contactaremos.");
          document.getElementById("diagnosticoForm").reset();
        } else {
          alert("Hubo un error al enviar tus respuestas. Intenta de nuevo.");
        }
      } catch (error) {
        console.error("Error al enviar:", error);
        alert("Error de conexión. Intenta de nuevo.");
      }
    });
  </script>
</body>
</html>
